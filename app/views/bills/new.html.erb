<% content_for :head do %>
<%= stylesheet_link_tag 'form' %>
<%= javascript_include_tag 'jquery', 'jquery-ui', 'jquery.metadata', 'jquery.labelover', 'jquery.validate' %>
<script>
	$(document).ready(function(){
            //set some defaults
            $.metadata.setType('attr', 'meta');
            $('label').labelOver();
            $('#bill').validate();
            $('a[href="#rm"]').click( function() {
                $(this).parent().remove();
            });

            $('#bill_item_template').hide();
            var counter = 1;
            $('#add_item').click(function() {
                counter++;
                var $item_set = $(
                    $('#bill_item_template').
                        //parent().
                        html().
                        replace(/MARKER/g, counter).
                        replace(/bill_item/g, 'bill_items_attributes')

                ).appendTo('#bill_items');
                $('label', $item_set).labelOver().validate();
                $('a[href="#rm"]', $item_set).click( function() {
                    $item_set.remove();
                });
                $('input', $item_set)[0].focus();
            });
        });
</script>
<% end %>

<h1>New bill</h1>
<%= link_to 'Add Item', '#', :id => 'add_item' %>

<%= render :partial => 'form' %>

<%= link_to 'Back', bills_path %>
